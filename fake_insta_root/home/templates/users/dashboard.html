{% extends 'base.html' %}

{% block content %}

<h2>Hello {{ user.username|default:'Guest'}}!</h2>
<div class='d-flex flex-column'>
    {% if user.is_authenticated %}
        <a href="{% url 'logout' %}">Logout</a>
        <a href="{% url 'password_change' %}">Change password</a>
        <a href="{% url 'edit_profile' %}">Edit Profile</a>
        <a href="{% url 'add_post' %}">New Post</a>
        <br>
        <div class='container'>
            <ul>
            {% for post in object_list %}
                <li>{{post.description}} - {{post.author}} - {{post.post_date}}<br><br>
                {{post.body}}</li>
                <br>
                <form action="{% url 'like_post' post.pk %}" method='post'>
                    {% csrf_token %}
                    <button type='submit' name='post_id' value='{{ post.id }}' class='btn btn-primary btn-sm'>Like</button> - {{post.total_likes}} Likes
                <br>
                <hr>
                <br>
            {% endfor %}
            </ul>
        </div>
    {% else %}
        <a href="{% url 'login' %}">Login</a>
    {% endif %}
</div>

{% endblock  %}